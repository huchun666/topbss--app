<ion-header>
  <ion-navbar>
    <ion-title text-center>配单仓</ion-title>
  </ion-navbar>
</ion-header>
<ion-content>

  <ion-refresher (ionRefresh)="refreshGetOrderStoreList($event)">
    <ion-refresher-content pullingText="下拉刷新" refreshingText="获取中...">
    </ion-refresher-content>
  </ion-refresher>

  <ion-list>
    <!-- loading -->
    <div class="loading-wrapper" *ngIf="loadingShow">
      <div>
        <ion-spinner item-start [name]="load.spinner"></ion-spinner>
      </div>
      <div [innerHTML]="load.content"></div>
    </div>
    <ion-item-sliding #item *ngFor="let single of orderStoreDataArray;let i = index">
      <ion-item>
        <ion-thumbnail item-start>
          <img [src]="single.productSkuDTO.fileSeq | productSkuDTOImage" alt="产品">
        </ion-thumbnail>
        <h2>{{single.productSkuDTO.productName}}</h2>
        <div class="count">
          <span class="btn-add" (touchstart)="addCount(i)">+</span>
          <span class="btn-remove" [ngClass]="{changeGray: single.productNum | changeGray}" (touchstart)="removeCount(i)">-</span>
          <div class="add-count">
            <input (change)="resetCount(i)" [(ngModel)]="single.productNum"  type="number">
          </div>
        </div>
        <div class="total">
            <div class="total-text">商品总额</div>
            <div class="total-input">
              <input (change)="resetCount(i,$event)" [(ngModel)]="single.itemPrice"  type="number">
            </div>
        </div>
        <div class="remark">
          <input (change)="resetCount(i)" placeholder="备注一下商品信息吧"  type="text" [(ngModel)]="single.remark">
        </div>
      </ion-item>
      
      <ion-item-options side="right">
        <button class="btn-delete" ion-button color="danger" (click)="delete(i)">
          <ion-icon name="trash"></ion-icon>
          删除
        </button>
      </ion-item-options>
    </ion-item-sliding>
    
  </ion-list>

  <div class="no-data" *ngIf = "noData">
		<img src="../../assets/image/nodata.png" alt="">
		<p>空空如也</p>
	</div>
	<div class="btn-noMore" *ngIf = "showNoMore">
		<span>—— 没有更多商品了 ——</span>
	</div>
  <ion-infinite-scroll (ionInfinite)="infiniteGetOrderStoreList($event)" *ngIf = "!showNoMore">
    <ion-infinite-scroll-content loadingText="加载更多..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>
  
  <button class="btn-confirm" ion-button full (touchstart)="addProductModal()" *ngIf = "confirmOrder">
    <span class="confirm">确认订单</span>
    <span>（总额：￥{{totalPriceFloat}}）</span>
  </button>

</ion-content>


        
